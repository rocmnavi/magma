<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MAGMA: magma_thread_queue Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="magma-logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">MAGMA<span id="projectnumber">&#160;2.7.2</span>
   </div>
   <div id="projectbrief">Matrix Algebra for GPU and Multicore Architectures</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classmagma__thread__queue.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classmagma__thread__queue-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">magma_thread_queue Class Reference<div class="ingroups"><a class="el" href="group__magma__internal.html">Internal routines</a> &raquo; <a class="el" href="group__magma__thread.html">Thread management</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>TODO: replace with OpenMP tasks.  
 <a href="classmagma__thread__queue.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8509f1128d7315a848631020ed571779"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmagma__thread__queue.html#a8509f1128d7315a848631020ed571779">magma_thread_queue</a> ()</td></tr>
<tr class="memdesc:a8509f1128d7315a848631020ed571779"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates queue with NO threads.  <br /></td></tr>
<tr class="separator:a8509f1128d7315a848631020ed571779"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85f9f3471cd59153184327d0ec015bd1"><td class="memItemLeft" align="right" valign="top"><a id="a85f9f3471cd59153184327d0ec015bd1" name="a85f9f3471cd59153184327d0ec015bd1"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>~magma_thread_queue</b> ()</td></tr>
<tr class="memdesc:a85f9f3471cd59153184327d0ec015bd1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls <a class="el" href="classmagma__thread__queue.html#a289689493610414cfa716dce2561e6cf" title="Sets quit_flag, so pop_task() will return NULL once queue is empty, telling threads to exit.">quit()</a>, then deallocates data. <br /></td></tr>
<tr class="separator:a85f9f3471cd59153184327d0ec015bd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a357744e19d6baf75b014f7f692cbf0ea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmagma__thread__queue.html#a357744e19d6baf75b014f7f692cbf0ea">launch</a> (magma_int_t in_nthread)</td></tr>
<tr class="memdesc:a357744e19d6baf75b014f7f692cbf0ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates threads.  <br /></td></tr>
<tr class="separator:a357744e19d6baf75b014f7f692cbf0ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9220f8ad5466f976dcc094f492474e93"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmagma__thread__queue.html#a9220f8ad5466f976dcc094f492474e93">push_task</a> (<a class="el" href="classmagma__task.html">magma_task</a> *task)</td></tr>
<tr class="memdesc:a9220f8ad5466f976dcc094f492474e93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add task to queue.  <br /></td></tr>
<tr class="separator:a9220f8ad5466f976dcc094f492474e93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a131b04a3dadf057fa5c13a6395096c9e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmagma__thread__queue.html#a131b04a3dadf057fa5c13a6395096c9e">sync</a> ()</td></tr>
<tr class="memdesc:a131b04a3dadf057fa5c13a6395096c9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Block until all outstanding tasks have been finished.  <br /></td></tr>
<tr class="separator:a131b04a3dadf057fa5c13a6395096c9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a289689493610414cfa716dce2561e6cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmagma__thread__queue.html#a289689493610414cfa716dce2561e6cf">quit</a> ()</td></tr>
<tr class="memdesc:a289689493610414cfa716dce2561e6cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets quit_flag, so <a class="el" href="classmagma__thread__queue.html#a2819b023e5d04949f96d5f142eeec13d" title="Get next task from queue.">pop_task()</a> will return NULL once queue is empty, telling threads to exit.  <br /></td></tr>
<tr class="separator:a289689493610414cfa716dce2561e6cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a2819b023e5d04949f96d5f142eeec13d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmagma__task.html">magma_task</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmagma__thread__queue.html#a2819b023e5d04949f96d5f142eeec13d">pop_task</a> ()</td></tr>
<tr class="memdesc:a2819b023e5d04949f96d5f142eeec13d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get next task from queue.  <br /></td></tr>
<tr class="separator:a2819b023e5d04949f96d5f142eeec13d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9ee2c11aae7957647606d6ea06b0db6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmagma__thread__queue.html#ad9ee2c11aae7957647606d6ea06b0db6">task_done</a> ()</td></tr>
<tr class="memdesc:ad9ee2c11aae7957647606d6ea06b0db6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Marks task as finished, decrementing number of outstanding tasks.  <br /></td></tr>
<tr class="separator:ad9ee2c11aae7957647606d6ea06b0db6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19bd7d488572a5f11f51f0bc9594b2a5"><td class="memItemLeft" align="right" valign="top"><a id="a19bd7d488572a5f11f51f0bc9594b2a5" name="a19bd7d488572a5f11f51f0bc9594b2a5"></a>
magma_int_t&#160;</td><td class="memItemRight" valign="bottom"><b>get_thread_index</b> (pthread_t thread) const</td></tr>
<tr class="memdesc:a19bd7d488572a5f11f51f0bc9594b2a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mostly for debugging, returns thread index in range 0, ..., nthread-1. <br /></td></tr>
<tr class="separator:a19bd7d488572a5f11f51f0bc9594b2a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="friends" name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:abd7b12d1655b23fc5fd52e52140841d9"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmagma__thread__queue.html#abd7b12d1655b23fc5fd52e52140841d9">magma_thread_main</a> (void *arg)</td></tr>
<tr class="memdesc:abd7b12d1655b23fc5fd52e52140841d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thread's main routine, executed by pthread_create.  <br /></td></tr>
<tr class="separator:abd7b12d1655b23fc5fd52e52140841d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>TODO: replace with OpenMP tasks. </p>
<p>Implements a thread pool with a multi-producer, multi-consumer queue.</p>
<p>Typical use: A main thread creates the queue and tells it to launch worker threads. Then the main thread inserts (pushes) tasks into the queue. Threads will execute the tasks. No dependencies are tracked. The main thread can sync the queue, waiting for all current tasks to finish, and then insert more tasks into the queue. When finished, the main thread calls quit or simply destructs the queue, which will exit all worker threads.</p>
<p>Tasks are sub-classes of <a class="el" href="classmagma__task.html" title="Super class for tasks used with magma_thread_queue.">magma_task</a>. They must implement the run() function.</p>
<h2><a class="anchor" id="autotoc_md308"></a>
Example</h2>
<div class="fragment"><div class="line"><span class="keyword">class </span>task1: <span class="keyword">public</span> <a class="code hl_class" href="classmagma__task.html">magma_task</a> {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    task1( <span class="keywordtype">int</span> arg ):</div>
<div class="line">        m_arg( arg ) {}</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> run() { do_task1( m_arg ); }</div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    <span class="keywordtype">int</span> m_arg;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>task2: <span class="keyword">public</span> <a class="code hl_class" href="classmagma__task.html">magma_task</a> {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    task2( <span class="keywordtype">int</span> arg1, <span class="keywordtype">int</span> arg2 ):</div>
<div class="line">        m_arg1( arg1 ), m_arg2( arg2 ) {}</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> run() { do_task2( m_arg1, m_arg2 ); }</div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    <span class="keywordtype">int</span> m_arg1, m_arg2;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> master( <span class="keywordtype">int</span> n ) {</div>
<div class="line">    <a class="code hl_class" href="classmagma__thread__queue.html">magma_thread_queue</a> queue;</div>
<div class="line">    queue.launch( 12 );  <span class="comment">// 12 worker threads</span></div>
<div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i=0; i &lt; n; ++i ) {</div>
<div class="line">        queue.push_task( <span class="keyword">new</span> task1( i ));</div>
<div class="line">    }</div>
<div class="line">    queue.sync();  <span class="comment">// wait for all task1 to finish before doing task2.</span></div>
<div class="line">    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i=0; i &lt; n; ++i ) {</div>
<div class="line">        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> j=0; j &lt; i; ++j ) {</div>
<div class="line">            queue.push_task( <span class="keyword">new</span> task2( i, j ));</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    queue.quit();  <span class="comment">// [optional] explicitly exit worker threads</span></div>
<div class="line">}</div>
<div class="ttc" id="aclassmagma__task_html"><div class="ttname"><a href="classmagma__task.html">magma_task</a></div><div class="ttdoc">Super class for tasks used with magma_thread_queue.</div><div class="ttdef"><b>Definition:</b> thread_queue.hpp:30</div></div>
<div class="ttc" id="aclassmagma__thread__queue_html"><div class="ttname"><a href="classmagma__thread__queue.html">magma_thread_queue</a></div><div class="ttdoc">TODO: replace with OpenMP tasks.</div><div class="ttdef"><b>Definition:</b> thread_queue.hpp:41</div></div>
</div><!-- fragment --><p>This is similar to python's queue class, but also implements worker threads and adds <a class="el" href="classmagma__thread__queue.html#a289689493610414cfa716dce2561e6cf" title="Sets quit_flag, so pop_task() will return NULL once queue is empty, telling threads to exit.">quit()</a> mechanism. <a class="el" href="classmagma__thread__queue.html#a131b04a3dadf057fa5c13a6395096c9e" title="Block until all outstanding tasks have been finished.">sync()</a> is like python's join, but threads do not exit, so join would be a misleading name. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a8509f1128d7315a848631020ed571779" name="a8509f1128d7315a848631020ed571779"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8509f1128d7315a848631020ed571779">&#9670;&#160;</a></span>magma_thread_queue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">magma_thread_queue::magma_thread_queue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates queue with NO threads. </p>
<p>Use <a class="el" href="classmagma__thread__queue.html#a357744e19d6baf75b014f7f692cbf0ea" title="Creates threads.">launch()</a> to create threads. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a357744e19d6baf75b014f7f692cbf0ea" name="a357744e19d6baf75b014f7f692cbf0ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a357744e19d6baf75b014f7f692cbf0ea">&#9670;&#160;</a></span>launch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void magma_thread_queue::launch </td>
          <td>(</td>
          <td class="paramtype">magma_int_t&#160;</td>
          <td class="paramname"><em>in_nthread</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates threads. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">in_nthread</td><td>Number of threads to launch. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9220f8ad5466f976dcc094f492474e93" name="a9220f8ad5466f976dcc094f492474e93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9220f8ad5466f976dcc094f492474e93">&#9670;&#160;</a></span>push_task()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void magma_thread_queue::push_task </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmagma__task.html">magma_task</a> *&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add task to queue. </p>
<p>Task must be allocated with C++ new. Increments number of outstanding tasks. Signals threads that are waiting in <a class="el" href="classmagma__thread__queue.html#a2819b023e5d04949f96d5f142eeec13d" title="Get next task from queue.">pop_task()</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">task</td><td>Task to queue. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a131b04a3dadf057fa5c13a6395096c9e" name="a131b04a3dadf057fa5c13a6395096c9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a131b04a3dadf057fa5c13a6395096c9e">&#9670;&#160;</a></span>sync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void magma_thread_queue::sync </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Block until all outstanding tasks have been finished. </p>
<p>Threads continue to be alive; more tasks can be pushed after sync. </p>

</div>
</div>
<a id="a289689493610414cfa716dce2561e6cf" name="a289689493610414cfa716dce2561e6cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a289689493610414cfa716dce2561e6cf">&#9670;&#160;</a></span>quit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void magma_thread_queue::quit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets quit_flag, so <a class="el" href="classmagma__thread__queue.html#a2819b023e5d04949f96d5f142eeec13d" title="Get next task from queue.">pop_task()</a> will return NULL once queue is empty, telling threads to exit. </p>
<p>Signals all threads that are waiting in <a class="el" href="classmagma__thread__queue.html#a2819b023e5d04949f96d5f142eeec13d" title="Get next task from queue.">pop_task()</a>. Waits for all threads to exit (i.e., joins them). It is safe to call quit multiple times &ndash; the first time all the threads are joined; subsequent times it does nothing. (Destructor also calls quit, but you may prefer to call it explicitly.) </p>

</div>
</div>
<a id="a2819b023e5d04949f96d5f142eeec13d" name="a2819b023e5d04949f96d5f142eeec13d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2819b023e5d04949f96d5f142eeec13d">&#9670;&#160;</a></span>pop_task()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmagma__task.html">magma_task</a> * magma_thread_queue::pop_task </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get next task from queue. </p>
<dl class="section return"><dt>Returns</dt><dd>next task, blocking until a task is inserted if necesary. </dd>
<dd>
NULL if queue is empty <em>and</em> <a class="el" href="classmagma__thread__queue.html#a289689493610414cfa716dce2561e6cf" title="Sets quit_flag, so pop_task() will return NULL once queue is empty, telling threads to exit.">quit()</a> has been called.</dd></dl>
<p>This does <em>not</em> decrement number of outstanding tasks; thread should call <a class="el" href="classmagma__thread__queue.html#ad9ee2c11aae7957647606d6ea06b0db6" title="Marks task as finished, decrementing number of outstanding tasks.">task_done()</a> when task is completed. </p>

</div>
</div>
<a id="ad9ee2c11aae7957647606d6ea06b0db6" name="ad9ee2c11aae7957647606d6ea06b0db6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9ee2c11aae7957647606d6ea06b0db6">&#9670;&#160;</a></span>task_done()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void magma_thread_queue::task_done </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Marks task as finished, decrementing number of outstanding tasks. </p>
<p>Signals threads that are waiting in <a class="el" href="classmagma__thread__queue.html#a131b04a3dadf057fa5c13a6395096c9e" title="Block until all outstanding tasks have been finished.">sync()</a>. </p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="abd7b12d1655b23fc5fd52e52140841d9" name="abd7b12d1655b23fc5fd52e52140841d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd7b12d1655b23fc5fd52e52140841d9">&#9670;&#160;</a></span>magma_thread_main</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void * magma_thread_main </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Thread's main routine, executed by pthread_create. </p>
<p>Executes tasks from queue (given as arg), until a NULL task is returned. Deletes each task when it is done. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">arg</td><td><a class="el" href="classmagma__thread__queue.html" title="TODO: replace with OpenMP tasks.">magma_thread_queue</a> to get tasks from. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/tomov/hipmagma/release/methane/magma/tmp/magma/magma-2.7.2/control/thread_queue.hpp</li>
<li>/home/tomov/hipmagma/release/methane/magma/tmp/magma/magma-2.7.2/control/thread_queue.cpp</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classmagma__thread__queue.html">magma_thread_queue</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
